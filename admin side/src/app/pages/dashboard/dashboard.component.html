<div class="row">
  <div class="col-lg-3 col-md-6 col-sm-6">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-3">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-layout-11 text-warning"></i>
            </div>
          </div>
          <div class="col-7 col-md-9">
            <div class="numbers">
              <p class="card-category">Create</p>
              <p class="mb-2 ">Category</p>
              <!-- <button class="btn btn-success btn-fab btn-icon btn-round"><i class="nc-icon nc-minimal-up"></i></button> -->

            </div>
          </div>
        </div>
      </div>
      <div class="card-footer ">
        <hr>
        <div class="stats">
          <button (click)="openCreateCategoryModal(createCategoryModal)" class="btn btn-outline-default btn-round"><i class="nc-icon nc-simple-add"></i> Create now</button>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6 col-sm-6">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-3">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-paper text-success"></i>
            </div>
          </div>
          <div class="col-7 col-md-9">
            <div class="numbers">
              <p class="card-category">Create</p>
              <p class="mb-2 ">Recipe</p>
              <!-- <button class="btn btn-success btn-fab btn-icon btn-round"><i class="nc-icon nc-minimal-up"></i></button> -->

            </div>
          </div>
        </div>
      </div>
      <div class="card-footer ">
        <hr>
        <div class="stats">
          <button (click)="openCreateCategoryModal(createRecipeModal)" class="btn btn-outline-default btn-round"><i class="nc-icon nc-simple-add"></i> Create now</button>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6 col-sm-6">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-3">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-tile-56 text-danger"></i>
            </div>
          </div>
          <div class="col-7 col-md-9">
            <div class="numbers">
              <p class="card-category">Create</p>
              <p class="mb-2 ">Dietary</p>
              <!-- <button class="btn btn-success btn-fab btn-icon btn-round"><i class="nc-icon nc-minimal-up"></i></button> -->

            </div>
          </div>
        </div>
      </div>
      <div class="card-footer ">
        <hr>
        <div class="stats">
          <button  (click)="openCreateDietaryModal(createDietaryModal)" class="btn btn-outline-default btn-round"><i class="nc-icon nc-simple-add"></i> Create now</button>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6 col-sm-6">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-3">
            <div class="icon-big text-center icon-warning">
              <!-- <i class="nc-icon nc-book-bookmark text-primary"></i> -->
              <i class="nc-icon nc-album-2 text-primary"></i>
            </div>
          </div>
          <div class="col-7 col-md-9">
            <div class="numbers">
              <p class="card-category">Create</p>
              <p class="mb-2 ">Image</p>
              <!-- <button class="btn btn-success btn-fab btn-icon btn-round"><i class="nc-icon nc-minimal-up"></i></button> -->

            </div>
          </div>
        </div>
      </div>
      <div class="card-footer ">
        <hr>
        <div class="stats">
          <button (click)="openUploadImageModal(uploadImageModal)" class="btn btn-outline-default btn-round"><i class="nc-icon nc-simple-add"></i> Create now</button>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="col-lg-3 col-md-6 col-sm-6">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-money-coins text-success"></i>
            </div>
          </div>
          <div class="col-7 col-md-8">
            <div class="numbers">
              <p class="card-category">Revenue</p>
              <p class="card-title">$ 1,345
                <p>
            </div>
          </div>
        </div>
      </div>
      <div class="card-footer ">
        <hr>
        <div class="stats">
          <i class="fa fa-calendar-o"></i> Last day
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6 col-sm-6">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-vector text-danger"></i>
            </div>
          </div>
          <div class="col-7 col-md-8">
            <div class="numbers">
              <p class="card-category">Errors</p>
              <p class="card-title">23
                <p>
            </div>
          </div>
        </div>
      </div>
      <div class="card-footer ">
        <hr>
        <div class="stats">
          <i class="fa fa-clock-o"></i> In the last hour
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6 col-sm-6">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-5 col-md-4">
            <div class="icon-big text-center icon-warning">
              <i class="nc-icon nc-favourite-28 text-primary"></i>
            </div>
          </div>
          <div class="col-7 col-md-8">
            <div class="numbers">
              <p class="card-category">Followers</p>
              <p class="card-title">+45K
                <p>
            </div>
          </div>
        </div>
      </div>
      <div class="card-footer ">
        <hr>
        <div class="stats">
          <i class="fa fa-refresh"></i> Update now
        </div>
      </div>
    </div>
  </div> -->
</div>
<!-- Modal for Creating Category -->

<ng-template #createCategoryModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Create Category</h4>
    <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <div class="form-group">
        <label for="categoryName">Category Name</label>
        <input 
        type="text" 
        id="categoryName" 
        class="form-control" 
        [(ngModel)]="newCategory.name" 
        name="categoryName" 
        required>      
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Cancel</button>
    <button type="button" class="btn btn-success" 
    (click)="createCategory(modal)" 
    [disabled]="!newCategory.name.trim()">Create</button>
  
  </div>
</ng-template>

<!-- Modal for Creating Recipe -->

<ng-template #createRecipeModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Create Recipe</h4>
    <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <div class="form-group">
        <label for="recipeName">Recipe Name</label>
        <input type="text" id="recipeName" class="form-control" [(ngModel)]="newRecipe.name" name="recipeName" required>
      </div>

      <div class="form-group">
        <label for="category">Category</label>
        <select id="category" class="form-control" [(ngModel)]="newRecipe.category" name="category">
          <option *ngFor="let category of categories" [value]="category.name">{{ category.name }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="dietaryPreferences">Dietary Preferences</label>
        <select id="dietaryPreferences" class="form-control" [(ngModel)]="newRecipe.dietaryPreferences" name="dietaryPreferences">
          <option *ngFor="let preference of dietaryPreferences" [value]="preference.name">{{ preference.name }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="cookingTime">Cooking Time (Minutes)</label>
        <input type="number" id="cookingTime" class="form-control" [(ngModel)]="newRecipe.cookingTime" name="cookingTime" required>
      </div>

      <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" class="form-control" [(ngModel)]="newRecipe.description" name="description"></textarea>
      </div>

      <div class="form-group">
        <label for="ingredients">Ingredients</label>
        <textarea id="ingredients" class="form-control" [(ngModel)]="newRecipe.ingredients" name="ingredients"></textarea>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Cancel</button>
    <button type="button" class="btn btn-success" (click)="createRecipe(modal)" 
    [disabled]="!newRecipe.name.trim() || !newRecipe.category || !newRecipe.dietaryPreferences">Create</button>
  </div>
</ng-template>
<!-- Modal for Creating Dietary -->

<ng-template #createDietaryModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Create Dietary Preferences</h4>
    <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <div class="form-group">
        <label for="categoryName">Dietary Name</label>
        <input 
        type="text" 
        id="dietaryName" 
        class="form-control" 
        [(ngModel)]="newDietary.name" 
        name="dietaryName" 
        required>      
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Cancel</button>
    <button type="button" class="btn btn-success" 
    (click)="createDietary(modal)" 
    [disabled]="!newDietary.name.trim()">Create</button>
  
  </div>
</ng-template>


<!-- Upload Image Modal -->
<ng-template #uploadImageModal let-modal> 
  <div class="modal-header">
    <h4 class="modal-title">Upload Image</h4>
    <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  
  <div class="modal-body" style="max-height: none; overflow: visible;">
    <form>
      <div class="form-group">
        <label for="recipeId">Recipe ID</label>
        <input 
          type="text" 
          class="form-control" 
          id="recipeId" 
          [(ngModel)]="uploadData.recipeId" 
          name="recipeId" 
          required>
      </div>
      <label for="imageFile">Select Image</label>
      <div class="form-group">
        <br><br>
       <input 
          type="file" 
          id="imageFile" 
          name="imageFile" 
          class="form-control-file" 
          (change)="onFileSelected($event)"
          style="display: block !important; opacity: 1 !important; height: auto !important; visibility: visible !important; border: 2px dashed #ccc; padding: 10px;">
          <br>
        </div>
    </form>
  </div>
  
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Cancel</button>
    <button type="button" class="btn btn-success" 
            (click)="uploadImage(modal)" 
            [disabled]="!uploadData.recipeId || !selectedFile">
      Upload
    </button>
  </div>
</ng-template>